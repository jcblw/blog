---
---

<script defer>
  function checkForPrism() {
    const hasCodeblocks = document.getElementsByTagName('pre').length > 0
    const hasPrism = window.Prism
    console.log('hasCodeblocks', hasCodeblocks)
    console.log('hasPrism', hasPrism)

    if (hasCodeblocks && hasPrism) {
      ['https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js', 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-typescript.min.js']
        .forEach((url) => {
          const script = document.createElement('script')
          script.src = url
          document.body.appendChild(script)
        })
        window.setTimeout(() => {
          window.Prism.highlightAll()
        }, 400)
        return
    } 

    if (hasCodeblocks && !hasPrism) {
      window.setTimeout(checkForPrism, 400)
    }
  }

  window.setTimeout(checkForPrism, 400)
</script>