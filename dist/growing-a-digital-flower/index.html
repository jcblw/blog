<!DOCTYPE html>
<html lang="en" class="astro-BVZIHDZO">
	<head>
		<!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/svg+xml" href="/favico.svg">
<meta name="generator" content="Astro v2.0.5">

<!-- Canonical URL -->
<link rel="canonical" href="https://jcbl.ws/growing-a-digital-flower/">

<!-- Primary Meta Tags -->
<title>Growing a digital flower</title>
<meta name="title" content="Growing a digital flower">
<meta name="description" content="How I made a unique digital flower for each user of my app.">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://jcbl.ws/growing-a-digital-flower/">
<meta property="og:title" content="Growing a digital flower">
<meta property="og:description" content="How I made a unique digital flower for each user of my app.">
<meta property="og:image" content="https://jcbl.ws/placeholder-social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://jcbl.ws/growing-a-digital-flower/">
<meta property="twitter:title" content="Growing a digital flower">
<meta property="twitter:description" content="How I made a unique digital flower for each user of my app.">
<meta property="twitter:image" content="https://jcbl.ws/placeholder-social.jpg">

<!-- Styles -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true">
<link href="https://fonts.googleapis.com/css2?family=Inconsolata&#38;family=Oxygen:wght@300;400&#38;display=swap" rel="stylesheet">
		
	</head>

	<body class="astro-BVZIHDZO">
		<header class="container">
	<nav class="py--l flex items--center">
		<a href="/" class="h3 flex items--center justify--center pr--s py--xs no-underline color--link">
	jcblw
</a>
		<a href="/blog" class="flex items--center justify--center pr--s py--xs no-underline color--link">
	Blog
</a>
		<a href="/talks" class="flex items--center justify--center pr--s py--xs no-underline color--link">
	Talks
</a>
	</nav>
</header>
		<main class="relative astro-BVZIHDZO">
			<div class="flex items--center justify--center px--xs astro-BVZIHDZO">
				
			</div>
			
<aside class="sticky table-of-contents astro-XVRFUPWN">
  <div class="absolute top-0 bg--backgroundSecondary rounded--m py--xs px--m mt--m astro-XVRFUPWN">
    <details class="astro-XVRFUPWN">
    <summary class="astro-XVRFUPWN"><h5 class="inline-flex bold pb--xs pt--xs astro-XVRFUPWN">Sections</h5></summary>
    <p class="py--zero astro-XVRFUPWN"><a href="#the-idea" class="astro-XVRFUPWN">The idea</a></p><p class="py--zero astro-XVRFUPWN"><a href="#inspiration-in-games" class="astro-XVRFUPWN">Inspiration in games</a></p><p class="py--zero astro-XVRFUPWN"><a href="#building-it-out" class="astro-XVRFUPWN">Building it out.</a></p><p class="py--zero astro-XVRFUPWN"><a href="#iterate-fast-iterate-often" class="astro-XVRFUPWN">Iterate fast, iterate often</a></p><p class="py--zero astro-XVRFUPWN"><a href="#find-what-feels-good" class="astro-XVRFUPWN">Find what feels good</a></p><p class="py--zero astro-XVRFUPWN"><a href="#saying-bye-to-my-code-sandbox" class="astro-XVRFUPWN">Saying bye to my code sandbox.</a></p><p class="py--zero astro-XVRFUPWN"><a href="#progression-through-creative-coding" class="astro-XVRFUPWN">Progression through creative coding</a></p><p class="py--zero astro-XVRFUPWN"><a href="#make-your-own-flower-today" class="astro-XVRFUPWN">Make your own flower today!</a></p>
    </details>
  </div>
</aside>
			<section class="container astro-BVZIHDZO">
				<div class="author-section flex row items--center py--s px--m mt--m bg--backgroundSecondary rounded--xxl astro-BVZIHDZO">
					<img class="rounded--full flex--0 astro-BVZIHDZO" width="45px" height="45px" src="https://avatars1.githubusercontent.com/u/578259?s=460&#38;v=4" alt="Jacob Lowe">
					<div class="pl--s flex--1 astro-BVZIHDZO">
						<h6 class="color--overline pt--zero pb--xs bold astro-BVZIHDZO">Jacob Lowe</h6>
						<p class="py--zero published-at astro-BVZIHDZO">
  <span>Published  </span>
  <time datetime="2020-05-01T00:00:00.000Z">
    Apr 30, 2020
  </time>
  <span>  ●  9 min read </span>
</p>
					</div>
				</div>
			</section>
			<article class="container blog-post astro-BVZIHDZO">
				<h1 class="color--link astro-BVZIHDZO">Growing a digital flower</h1>
				<hr class="astro-BVZIHDZO">
				<h2 id="the-idea"><a aria-hidden="true" tabIndex="-1" href="#the-idea"><span class="heading-link">⌗</span></a>The idea</h2>
<p>I have this app I released in early 2020 named Oat. This app was all about sowing mindfulness into your daily routines. It worked well but the day to day usage of the app seemed more like a chore and the long term effects of using the app are tough to see due to the gradual change in behavior. That’s when I had the idea of showing some type of progression in the app to show users some intermediate progress indicator and reward the user for using the app. I had a couple of things I wanted this feature to provide.</p>

<link rel="stylesheet" href="/_astro/_...slug_.e1b8cc14.css" />
<link rel="stylesheet" href="/_astro/_...slug_.e6843b2e.css" />
<link rel="stylesheet" href="/_astro/_...slug_.592bcd50.css" /><link rel="stylesheet" href="/_astro/Highlight.astro_astro_type_style_index_0_lang.848fed66.css" /><div class="flex items--baseline row px--zero astro-SWZZBXBD" style="--color: var(--vulcan);--backgroundColor: var(--aero-blue);">
  <div class="highlight-bg p--m rounded--m flex row flex--1 astro-SWZZBXBD">
    <div class="flex flex--0 items--center justify--center astro-SWZZBXBD">
      <div class="highlight-imageContainer mr--m flex items--center justify--center rounded--xl overflow--hidden astro-SWZZBXBD">
        <img class="highlight-image astro-SWZZBXBD" src="/oat.svg">
      </div>
    </div>
    <div class="flex--1 flex column justify--center astro-SWZZBXBD">
      <h4 class="highlight-color py--zero astro-SWZZBXBD">
        Check out Oat
      </h4>
      <a class="highlight-color py--zero astro-SWZZBXBD" href="https://play.google.com/store/apps/details?id=com.oatmobile">Available on the Google Play store</a>
    </div>
  </div>
</div>
<ul>
<li>An analogy to usage of the application ( sowing the seeds of mindfulness )</li>
<li>Allow the user to see a step by step progression of their usage</li>
<li>Allow for sharing of this progress</li>
<li>Make it unique enough for users that they are able to generate something new every day</li>
</ul>
<p>I was able to get some beautiful illustrations of an orchid-like plant from <a href="https://www.fiverr.com/aistegi">Aistegi</a> on <a href="https://www.fiverr.com/">Fivver</a> and code up an alpha version of the app which gave me about 75% of what I wanted. The progress screen felt great, but after a week of progress, I had lost my desire to check out the progress screen.</p>
<p><img src="/full-flowers.png" alt="All the steps of the flower"/></p>
<p>This was at no fault of the design, or illustration, it’s just that once I had achieved the final goal there was not much reason to achieve it again since it was the same thing every day. This pushed me even harder to pull off the last 25% of the project I wanted to achieve which is making it unique daily.</p>
<h2 id="inspiration-in-games"><a aria-hidden="true" tabIndex="-1" href="#inspiration-in-games"><span class="heading-link">⌗</span></a>Inspiration in games</h2>
<p>I think there is a large number of correlations between what I wanted to achieve in my application and the things that games do to achieve replay-ability. There is a number of ways games do this, but one of the biggest is in generating unique items or content on each new play-through.</p>
<p>A couple of examples are how No Mans Sky will generate a universe, Binding of Isaac will generate new dungeons, Borderlands will generate new weapons, and how Minecraft will generate a whole new world. Minecraft has been a game that I started playing around 10 years ago and can still pick it up today and have a unique experience in the game. I wanted that experience on a smaller level in my application. I started to explore how these games generated this content, and how I could leverage those learning to build unique flowers for my users.</p>
<p>I have used an equation called <strong>Perlin simplex</strong> in the past to compile a map of random points, but for something like this I needed to use a very similar but different equation call <strong>simplex noise</strong>. The reason for this is that I would like to be able to consistently generate the same flower-based off a seed value. Essentially I should be able to throw that seed into simplex noise and get all the same points out of it. This was super beneficial when fine-tuning the look in the outcome.</p>
<h2 id="building-it-out"><a aria-hidden="true" tabIndex="-1" href="#building-it-out"><span class="heading-link">⌗</span></a>Building it out.</h2>
<p>My process to generate these flowers is like most of my normal development process. I started off with a really rough assumption put a little code behind it a test and revise. Then I repeat the process over and over till I get something I am willing to turn into production code.</p>
<p>To support this my initial development environment is vastly different than my production environment due to the behavior and consistency I wanted for this feature. To start out I did everything in the browser. I used <strong>create react app</strong> and threw together a working page pretty quickly. The reason I started in the browser is that I wanted to have visuals of the system right away. The final images are not going to be generated in a React app but as long as I had that in mind I could make sure to not box myself into the react implementation.</p>
<h2 id="iterate-fast-iterate-often"><a aria-hidden="true" tabIndex="-1" href="#iterate-fast-iterate-often"><span class="heading-link">⌗</span></a>Iterate fast, iterate often</h2>
<p>I started off with this hazy map of points, then I would place a larger circle on points that were above a certain number. The range of numbers that was generated by the simplex noise library I used gave me a range of <strong>-2 to 2</strong>. The threshold I used was 1.99, but quickly found a sweet spot around <strong>1.9978</strong>. This also introduced the first number I could change in the flower generation to be able to change the amount of points that a flower could grow. This number although a good one to change can only be changed slightly without getting out of control. Early on I also started drawing a area that I would want to pull points from. This was because I only wanted flowers in certain areas of the plant. This is a screen shot of what this looked like.</p>
<p><img src="/simplex-noise.png" alt="Simplex Noise output"/></p>
<p>As you can see, I also drew on some lighter green lines, this was because I eventually wanted to add some padding to the flower so two flowers were not on top of each other. I needed at this point how to figure out how to find all the points inside of the larger circle. I looked up some equations on how this could be done, and most of them were pretty complicated. Luckily since this is not a game and I do not need the top performance I was able to sidestep this issue with something that ended up being super flexible and allowed me again to focus on the more visual aspect of what I wanted to do.</p>
<p>Essentially instead of trying to calculate where these points should be placed I just pulled the current pixel value from the canvas and based on a certain color being there I could draw the random points that are in the given color. Here is an early version of this.</p>
<p><img src="/red-space.png" alt="Highlighting parts of the illustration"/></p>
<p>This was actually a great change because it essentially allowed me to easily change the bounding box in Sketch and then just import the new image and it would work with zero code changes. Here is was the final version of the red area around the plant.</p>
<p><img src="/red-space-final.png" alt="Iteration of highlighting parts of the illustration"/></p>
<h2 id="find-what-feels-good"><a aria-hidden="true" tabIndex="-1" href="#find-what-feels-good"><span class="heading-link">⌗</span></a>Find what feels good</h2>
<p>After this change, there was only a small amount of changes that were made to the actual code that was generating the points. I essentially pulled out a number of values from the actual code and passed them in as props to my component that was calculating all the points. This allowed me to essentially turn the knobs of my flower generated and find the best feeling flower generation.</p>
<p><img src="/control-center.png" alt="Inputs used to change flower generation"/></p>
<p>I added a few inputs to change the seed of the flower generator, then also an input to adjust the padding around the flowers, and one last input to change the threshold of the points selected. These inputs allowed me to modify the way the flowers are generated and then test a bunch of different seeds with the settings. In the end product the <strong>padding</strong> and <strong>threshold</strong> values are going to be derived based on usage, so the more times you open the app the more flowers are generated, and the less times you open it the fewer flowers are generated. All the derived values have a pretty good looking output but just slightly different visuals. This is to almost give a data visualization on the usage of the app the is more art than bar graphs.</p>
<p>Another big change at this point was that I manually created more flowers, this was a better solution then rotating the existing flowers because it gave more variety to the flowers that could be generated. The original flowers were just based on the original image, but I was able to copy, rotate, and manipulate them until I had double the amount of flowers to play with.</p>
<h2 id="saying-bye-to-my-code-sandbox"><a aria-hidden="true" tabIndex="-1" href="#saying-bye-to-my-code-sandbox"><span class="heading-link">⌗</span></a>Saying bye to my code sandbox.</h2>
<p>This React tool was super fun to play with and develop this feature, but it would not really make sense for the goal of this feature. I want to briefly go through the process of making this ready for prime time. One of the big goals of this was to allow users to generate these and then share out the results. To do this it meant that I needed to be able to have these images live in a place that is accessible to the outside world, and not just on the user’s device. This means I could not only generate the flowers on the user’s phone but would also need to generate it on the server. I actually opted to not generate them on the application at all because React Native, the framework the app is built in, is not super friendly with canvas, and also I would rather just generate the image of the server then pass the URL to the client. This way I could generate a number of images, and then throw them all up on s3 in a place that is ready to share.</p>
<p>To do this all I needed to do was take my client code and turn it into server code and luckily was pretty simple because I segmented all the main pieces of this functionality as pure functions. This allows most of the code to be easily transferable out of React land. I also have some prior knowledge of node-canvas which let me know some of my limitations when moving to a server-based canvas. I lose a lot of visibility into the processes that create these images by doing this, which is why I am doing this last after I have tuned the software. Luckily everything still worked after the conversion.</p>
<p><img src="/what-it-looks-like.png" alt="Server rendered illustration"/></p>
<h2 id="progression-through-creative-coding"><a aria-hidden="true" tabIndex="-1" href="#progression-through-creative-coding"><span class="heading-link">⌗</span></a>Progression through creative coding</h2>
<p>These types of projects are the ones that feed my soul. These projects envelop me in my code, and in minor details of my code that I probably would not otherwise dive this deep into. I always try to push myself to do these types of projects, or on the other side of work try to find creativity in my day to day projects as well. It works for me well, but I would also encourage you to try to find creativity in what you are doing with code. Push yourself into the crazy ideas, and not be afraid to sometime walk back those crazy ideas.</p>
<h2 id="make-your-own-flower-today"><a aria-hidden="true" tabIndex="-1" href="#make-your-own-flower-today"><span class="heading-link">⌗</span></a>Make your own flower today!</h2>
<p><a href="https://getoat.co/flowers/ebb921f8c8e293108629005a0d62c371c6115c38">Here</a> is an example of the final product.</p>
<p>I am not sure if this is going to be a killer feature or not, you tell me. This change is now live in the <a href="https://play.google.com/store/apps/details?id=com.oatmobile">Play Store</a> and available for download. If you’re into mindfulness, or just want to create your own flower check it out!</p>
			</article>
			<section class="container astro-BVZIHDZO">
				<style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).only=t=>{(async()=>await(await t())())()},window.dispatchEvent(new Event("astro:only"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="hIc7t" component-url="/_astro/Comments.f3e8a87c.js" component-export="Comments" renderer-url="/_astro/client.38423ee9.js" props="{&quot;slug&quot;:[0,&quot;/growing-a-digital-flower&quot;],&quot;title&quot;:[0,&quot;Growing a digital flower&quot;],&quot;shortname&quot;:[0,&quot;jcbl-ws&quot;],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;Comments&quot;,&quot;value&quot;:true}"></astro-island>
			</section>
			<div class="flex row container astro-BVZIHDZO">
				<a href="https://mobile.twitter.com/search?q=https://jcbl.ws/blog/growing-a-digital-flower" class="pr--l my--m  astro-BVZIHDZO">
					Discuss it on Twitter
				</a>
				<a href="https://github.com/jcblw/blog/src/content/blog/growing-a-digital-flower" class="pr--l my--m  astro-BVZIHDZO">
					Edit on Github
				</a>
			</div>
		</main>
		<footer class="container">
	<hr>
	<p class="pb--xxl">&copy; 2023 Jacob Lowe. All rights reserved.</p>
</footer>
	</body></html>